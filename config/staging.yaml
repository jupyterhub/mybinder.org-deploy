binderhub:
  ingress:
    hosts:
      - staging.mybinder.org

  registry:
    prefix: gcr.io/binder-staging/r2d-05168b0-

  hub:
    url: https://hub.staging.mybinder.org

  jupyterhub:
    singleuser:
      memory:
        guarantee: 256M
        limit: 256M
      cpu:
        guarantee: 0.1
        limit: 1
    ingress:
      hosts:
        - hub.staging.mybinder.org
      tls:
        - secretName: kubelego-tls-jupyterhub-staging
          hosts:
            - hub.staging.mybinder.org

grafana:
  server:
    ingress:
      hosts:
        - grafana.staging.mybinder.org
      tls:
        - hosts:
            - grafana.staging.mybinder.org
          secretName: kubelego-tls-grafana
  serverConfigFile:
    grafana.ini: |
      ; instance_name = ${HOSTNAME}
      [paths]
      data = /var/lib/grafana/data
      logs = /var/log/grafana
      plugins = /var/lib/grafana/plugins

      [snapshots]
      external_enabled = true
      external_snapshot_url = https://snapshots-origin.raintank.io
      external_snapshot_name = Publish to snapshot.raintank.io

      [security]
      admin_password = {{GRAFANA_ADMIN_PWD}}

      [users]
      ;allow_sign_up = true
      ;allow_org_create = true
      ;auto_assign_org = true
      ;auto_assign_org_role = Viewer
      ;login_hint = email or username
      ;default_theme = dark

      [auth.anonymous]
      enabled = true
      org_name = Main Org.
      org_role = Viewer

      [log]
      mode = console
      level = info

      [dashboards.json]
      enabled = true
      path = /var/lib/grafana/dashboards

      [grafana_net]
      url = https://grafana.net

      [smtp]
      enabled = true
      host = smtp.gmail.com:587
      user = mybinderbot@gmail.com
      password = """{{GRAFANA_SMTP_PWD}}"""
      skip_verify = true
      from_address = mybinderbot@gmail.com
      from_name = BinderBot

prometheus:
  server:
    ingress:
        hosts:
          - prometheus.staging.mybinder.org
        tls:
          - hosts:
              - prometheus.staging.mybinder.org
            secretName: kubelego-tls-prometheus

nginx-ingress:
  controller:
    service:
      loadBalancerIP: 104.197.11.66
    replicaCount: 4

static:
  ingress:
    hosts:
      - static.staging.mybinder.org

redirector:
  redirects:
    - type: host
      host:
        from: beta.staging.mybinder.org
        to: staging.mybinder.org
    - type: host
      host:
        from: docs.staging.mybinder.org
        to: mybinder.readthedocs.io
    - type: host
      host:
        from: playground.staging.mybinder.org
        to: play.nteract.io
